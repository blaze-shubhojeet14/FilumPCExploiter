using System;
using System.Collections.Generic;
using System.Linq;
using System.Text;
using System.Threading.Tasks;
using System.Diagnostics;
using System.Windows;
using System.Windows.Controls;
using System.Windows.Data;
using System.Windows.Documents;
using System.Windows.Input;
using System.Windows.Media;
using System.Windows.Media.Imaging;
using System.Windows.Shapes;

namespace FilumPCExploiter
{
    /// <summary>
    /// Interaction logic for WBTabsWindow.xaml
    /// </summary>
    public partial class WBTabsWindow : Window
    {
        public WBTabsWindow()
        {
            InitializeComponent();
            MessageBox.Show("This has the potential to crash your computer so use it at your own risk when using more than 20 tabs! The developers wil not be held responsible for any damage caused by its usage.", "Warning", MessageBoxButton.OK, MessageBoxImage.Warning);
        }

        private void exURL_TextChanged(object sender, TextChangedEventArgs e)
        {
            if (exURL.Text != "")
            {
                placeholder.Visibility = Visibility.Hidden;
            }
            exLabelTabs.Visibility = Visibility.Visible;
            exTabs.Visibility = Visibility.Visible;
            placeholder1.Visibility = Visibility.Visible;
        }
        public static bool IsAllDigits(string s)
        {
            foreach (char c in s)
            {
                if (!Char.IsDigit(c))
                    return false;
            }
            return true;
        }
        public static bool IsAllLettersOrDigits(string s)
        {
            foreach (char c in s)
            {
                if (!Char.IsLetterOrDigit(c))
                    return false;
            }
            return true;
        }
        public static bool IsAllLettersOrDigitsOrUnderscores(string s)
        {
            foreach (char c in s)
            {
                if (!Char.IsLetterOrDigit(c) && c != '_')
                    return false;
            }
            return true;
        }
        public static bool IsAllLetters(string s)
        {
            foreach (char c in s)
            {
                if (!Char.IsLetter(c))
                    return false;
            }
            return true;
        }

        private void exTabs_TextChanged(object sender, TextChangedEventArgs e)
        {

            if (exTabs.Text != "")
            {
                placeholder1.Visibility = Visibility.Hidden;
            }
            if (IsAllDigits(exTabs.Text) == false)
            {
                exTabs.Clear();
                MessageBox.Show("Please enter only numbers in this field!", "Error", MessageBoxButton.OK, MessageBoxImage.Error);
            }
            else if (IsAllDigits(exTabs.Text) == true && exTabs.Text != "")
            {
                exReturnBtn.Visibility = Visibility.Visible;
                exBeginBtn.Visibility = Visibility.Visible;
            }
        }

        private void exReturnBtn_Click(object sender, RoutedEventArgs e)
        {
            MainWindow mainWindow = new MainWindow();
            mainWindow.Show();
            this.Close();
        }

        private void exBeginBtn_Click(object sender, RoutedEventArgs e)
        {
            try 
            { 
            if (exURL.Text == "")
            {
                MessageBox.Show("Please enter a URL/File Name!", "Error", MessageBoxButton.OK, MessageBoxImage.Error);
            }
            else if (exTabs.Text == "")
            {
                MessageBox.Show("Please enter the number of tabs you want to open!", "Error", MessageBoxButton.OK, MessageBoxImage.Error);
            }
            else if (exURL.Text != "" && exTabs.Text != "")
                {
                    long tabsNum = Convert.ToInt64(exTabs.Text);
                    string url = exURL.Text;
                    Process process = new Process();
                    for (int i = 0; i < tabsNum; i++)
                    {
                        process.StartInfo.UseShellExecute = true;
                        process.StartInfo.FileName = url;
                        process.Start();
                    }
                    process.Close();
                    MessageBox.Show("Tabs opened successfully!", "Success", MessageBoxButton.OK, MessageBoxImage.Information);
                }
            }
            catch(System.ComponentModel.Win32Exception)
            {
                MessageBox.Show("The file/url you entered does not exist!", "Error", MessageBoxButton.OK, MessageBoxImage.Error);
            }
            catch (OverflowException)
            {
                MessageBox.Show("The number you entered is too large!", "Error", MessageBoxButton.OK, MessageBoxImage.Error);
            }
            catch (Exception)
            {
                MessageBox.Show("An unknown error has occured!", "Error", MessageBoxButton.OK, MessageBoxImage.Error);
            }
        }
    } 
}
